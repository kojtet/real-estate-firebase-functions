[debug] [2023-05-10T16:49:13.824Z] ----------------------------------------------------------------------
[debug] [2023-05-10T16:49:13.825Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions
[debug] [2023-05-10T16:49:13.825Z] CLI Version:   11.19.0
[debug] [2023-05-10T16:49:13.825Z] Platform:      darwin
[debug] [2023-05-10T16:49:13.825Z] Node Version:  v18.12.1
[debug] [2023-05-10T16:49:13.829Z] Time:          Wed May 10 2023 16:49:13 GMT+0000 (Greenwich Mean Time)
[debug] [2023-05-10T16:49:13.829Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-05-10T16:49:13.870Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-05-10T16:49:13.871Z] > authorizing via signed-in user (michaeltettteh@gmail.com)
[debug] [2023-05-10T16:49:13.871Z] [iam] checking project house-master-47f45 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-05-10T16:49:13.872Z] > refreshing access token with scopes: []
[debug] [2023-05-10T16:49:13.873Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2023-05-10T16:49:13.873Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-05-10T16:49:14.291Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2023-05-10T16:49:14.292Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-05-10T16:49:14.308Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/house-master-47f45:testIamPermissions [none]
[debug] [2023-05-10T16:49:14.308Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/house-master-47f45:testIamPermissions x-goog-quota-user=projects/house-master-47f45
[debug] [2023-05-10T16:49:14.308Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/house-master-47f45:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-05-10T16:49:15.428Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/house-master-47f45:testIamPermissions 200
[debug] [2023-05-10T16:49:15.428Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/house-master-47f45:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-05-10T16:49:15.429Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/house-master-47f45/serviceAccounts/house-master-47f45@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-05-10T16:49:15.429Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/house-master-47f45/serviceAccounts/house-master-47f45@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-05-10T16:49:16.097Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/house-master-47f45/serviceAccounts/house-master-47f45@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-05-10T16:49:16.097Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/house-master-47f45/serviceAccounts/house-master-47f45@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'house-master-47f45'...
[info] 
[info] i  deploying functions 
[debug] [2023-05-10T16:49:16.099Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/house-master-47f45 [none]
[debug] [2023-05-10T16:49:16.774Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/house-master-47f45 200
[debug] [2023-05-10T16:49:16.775Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/house-master-47f45 {"projectId":"house-master-47f45","projectNumber":"874903449042","displayName":"house-master","name":"projects/house-master-47f45","resources":{"hostingSite":"house-master-47f45","realtimeDatabaseInstance":"house-master-47f45","storageBucket":"house-master-47f45.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_10ba1ac2-f43c-4164-9934-6f4d164ea964"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-05-10T16:49:16.778Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/cloudfunctions.googleapis.com [none]
[debug] [2023-05-10T16:49:16.778Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/house-master-47f45
[debug] [2023-05-10T16:49:16.780Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/runtimeconfig.googleapis.com [none]
[debug] [2023-05-10T16:49:16.780Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/house-master-47f45
[debug] [2023-05-10T16:49:16.781Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/cloudbuild.googleapis.com [none]
[debug] [2023-05-10T16:49:16.781Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/cloudbuild.googleapis.com x-goog-quota-user=projects/house-master-47f45
[debug] [2023-05-10T16:49:16.782Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/artifactregistry.googleapis.com [none]
[debug] [2023-05-10T16:49:16.782Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/artifactregistry.googleapis.com x-goog-quota-user=projects/house-master-47f45
[debug] [2023-05-10T16:49:18.091Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/cloudbuild.googleapis.com 200
[debug] [2023-05-10T16:49:18.091Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-05-10T16:49:18.091Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/runtimeconfig.googleapis.com 200
[debug] [2023-05-10T16:49:18.091Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-05-10T16:49:18.092Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/artifactregistry.googleapis.com 200
[debug] [2023-05-10T16:49:18.092Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-05-10T16:49:18.093Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/cloudfunctions.googleapis.com 200
[debug] [2023-05-10T16:49:18.093Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/house-master-47f45/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-05-10T16:49:18.093Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/house-master-47f45/adminSdkConfig [none]
[debug] [2023-05-10T16:49:18.659Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/house-master-47f45/adminSdkConfig 200
[debug] [2023-05-10T16:49:18.659Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/house-master-47f45/adminSdkConfig {"projectId":"house-master-47f45","databaseURL":"https://house-master-47f45.firebaseio.com","storageBucket":"house-master-47f45.appspot.com","locationId":"us-central"}
[debug] [2023-05-10T16:49:18.660Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/house-master-47f45/configs [none]
[debug] [2023-05-10T16:49:19.292Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/house-master-47f45/configs 200
[debug] [2023-05-10T16:49:19.292Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/house-master-47f45/configs {}
[debug] [2023-05-10T16:49:19.296Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-05-10T16:49:20.250Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.18.0",
    "helmet": "^6.1.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-05-10T16:49:20.250Z] Building nodejs source
[debug] [2023-05-10T16:49:20.250Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-05-10T16:49:20.387Z] Serving at port 9005

[debug] [2023-05-10T16:49:20.450Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-05-10T16:49:20.456Z] shutdown requested via /__/quitquitquit

[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/michaeltetteh/Documents/GitHub/real-estate-firebase-functions/functions (66.09 KB) for uploading 
[debug] [2023-05-10T16:49:20.496Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/house-master-47f45/locations/-/functions [none]
[debug] [2023-05-10T16:49:21.472Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/house-master-47f45/locations/-/functions 200
[debug] [2023-05-10T16:49:21.473Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/house-master-47f45/locations/-/functions {"functions":[{"name":"projects/house-master-47f45/locations/us-central1/functions/api","httpsTrigger":{"url":"https://us-central1-house-master-47f45.cloudfunctions.net/api","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"api","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"house-master-47f45@appspot.gserviceaccount.com","updateTime":"2023-05-10T16:03:41.170Z","versionId":"46","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"5a7d32984a624250b357ae5e31ca63422513d6f7"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-163451885067.us-central1.cloudfunctions.appspot.com/6cb2268d-5f05-4229-9ad3-10ae58addd75.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"house-master-47f45\",\"databaseURL\":\"https://house-master-47f45.firebaseio.com\",\"storageBucket\":\"house-master-47f45.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"house-master-47f45","EVENTARC_CLOUD_EVENT_SOURCE":"projects/house-master-47f45/locations/us-central1/functions/api"},"runtime":"nodejs16","ingressSettings":"ALLOW_ALL","buildId":"e606f54d-7919-47a2-a540-2d2bf3b43ae0","buildName":"projects/874903449042/locations/us-central1/builds/e606f54d-7919-47a2-a540-2d2bf3b43ae0","dockerRegistry":"ARTIFACT_REGISTRY"}]}
[debug] [2023-05-10T16:49:21.475Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/house-master-47f45/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-05-10T16:49:22.802Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/house-master-47f45/locations/-/functions 200
[debug] [2023-05-10T16:49:22.802Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/house-master-47f45/locations/-/functions {}
[debug] [2023-05-10T16:49:22.811Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/house-master-47f45 [none]
[debug] [2023-05-10T16:49:23.325Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/house-master-47f45 200
[debug] [2023-05-10T16:49:23.325Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/house-master-47f45 {"projectId":"house-master-47f45","projectNumber":"874903449042","displayName":"house-master","name":"projects/house-master-47f45","resources":{"hostingSite":"house-master-47f45","realtimeDatabaseInstance":"house-master-47f45","storageBucket":"house-master-47f45.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_10ba1ac2-f43c-4164-9934-6f4d164ea964"}
[debug] [2023-05-10T16:49:23.326Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/house-master-47f45/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-05-10T16:49:23.326Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/house-master-47f45/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-05-10T16:49:24.164Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/house-master-47f45/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-05-10T16:49:24.165Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/house-master-47f45/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-163451885067.us-central1.cloudfunctions.appspot.com/c5d867d0-556c-4a1d-85d0-bbd840f89ca9.zip?GoogleAccessId=service-874903449042@gcf-admin-robot.iam.gserviceaccount.com&Expires=1683739164&Signature=KMYlfsf6DPLpCyBWhM7i444HTQML4LB6WgsUiM7oxPJGAzuyegckmmlLffz%2Bi%2BEri37JqBHa%2Bw9Q6bvm3U72bSHx0mKmEf3CeXMEckZcIUBvVXz2FiavTgQMnmu5iVR9DCtODizqV20NMGAUS7bAAVVHXpV0bme2bViuFHSiFeip9TB9w0RohKuzTf6Fkq6i9k92CXyhlCYgr3oBnukOELLdq%2B4e19isv583wEs9o%2BRLqEPiPaM4c0cRongeJyBAZZVF%2F3q5PN%2F%2FtBhUupiRhtAMBm9pg5P2zQ6%2BrTAS%2F%2FA57q5nDBVf0zL5m9Axv4OLeIHBae%2F2qHXiOpTWkCaIBw%3D%3D"}
[debug] [2023-05-10T16:49:24.167Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-163451885067.us-central1.cloudfunctions.appspot.com/c5d867d0-556c-4a1d-85d0-bbd840f89ca9.zip GoogleAccessId=service-874903449042%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1683739164&Signature=KMYlfsf6DPLpCyBWhM7i444HTQML4LB6WgsUiM7oxPJGAzuyegckmmlLffz%2Bi%2BEri37JqBHa%2Bw9Q6bvm3U72bSHx0mKmEf3CeXMEckZcIUBvVXz2FiavTgQMnmu5iVR9DCtODizqV20NMGAUS7bAAVVHXpV0bme2bViuFHSiFeip9TB9w0RohKuzTf6Fkq6i9k92CXyhlCYgr3oBnukOELLdq%2B4e19isv583wEs9o%2BRLqEPiPaM4c0cRongeJyBAZZVF%2F3q5PN%2F%2FtBhUupiRhtAMBm9pg5P2zQ6%2BrTAS%2F%2FA57q5nDBVf0zL5m9Axv4OLeIHBae%2F2qHXiOpTWkCaIBw%3D%3D
[debug] [2023-05-10T16:49:24.167Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-163451885067.us-central1.cloudfunctions.appspot.com/c5d867d0-556c-4a1d-85d0-bbd840f89ca9.zip [stream]
[debug] [2023-05-10T16:49:25.026Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-163451885067.us-central1.cloudfunctions.appspot.com/c5d867d0-556c-4a1d-85d0-bbd840f89ca9.zip 200
[debug] [2023-05-10T16:49:25.026Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-163451885067.us-central1.cloudfunctions.appspot.com/c5d867d0-556c-4a1d-85d0-bbd840f89ca9.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 16 function api(us-central1)... 
[debug] [2023-05-10T16:49:25.033Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/house-master-47f45/locations/us-central1/functions/api updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken
[debug] [2023-05-10T16:49:25.033Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/house-master-47f45/locations/us-central1/functions/api {"name":"projects/house-master-47f45/locations/us-central1/functions/api","sourceUploadUrl":"https://storage.googleapis.com/uploads-163451885067.us-central1.cloudfunctions.appspot.com/c5d867d0-556c-4a1d-85d0-bbd840f89ca9.zip?GoogleAccessId=service-874903449042@gcf-admin-robot.iam.gserviceaccount.com&Expires=1683739164&Signature=KMYlfsf6DPLpCyBWhM7i444HTQML4LB6WgsUiM7oxPJGAzuyegckmmlLffz%2Bi%2BEri37JqBHa%2Bw9Q6bvm3U72bSHx0mKmEf3CeXMEckZcIUBvVXz2FiavTgQMnmu5iVR9DCtODizqV20NMGAUS7bAAVVHXpV0bme2bViuFHSiFeip9TB9w0RohKuzTf6Fkq6i9k92CXyhlCYgr3oBnukOELLdq%2B4e19isv583wEs9o%2BRLqEPiPaM4c0cRongeJyBAZZVF%2F3q5PN%2F%2FtBhUupiRhtAMBm9pg5P2zQ6%2BrTAS%2F%2FA57q5nDBVf0zL5m9Axv4OLeIHBae%2F2qHXiOpTWkCaIBw%3D%3D","entryPoint":"api","runtime":"nodejs16","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"93acabba03f03267d00d92f5ec9be2630743ab5d"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"house-master-47f45\",\"databaseURL\":\"https://house-master-47f45.firebaseio.com\",\"storageBucket\":\"house-master-47f45.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"house-master-47f45","EVENTARC_CLOUD_EVENT_SOURCE":"projects/house-master-47f45/locations/us-central1/functions/api"},"availableMemoryMb":256}
